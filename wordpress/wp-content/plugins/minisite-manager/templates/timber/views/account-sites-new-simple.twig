<!DOCTYPE html>
<html lang="en" class="scroll-smooth" data-theme="blue">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{{ page_title }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --primary:#2563EB; --on-primary:#fff;
      --secondary:#0EA5E9; --on-secondary:#03283A;
      --background:#F8FAFC; --on-background:#0F172A;
      --surface:#FFFFFF; --on-surface:#0F172A;
      --surface-1:#F1F5F9; --on-surface-variant:#475569;
      --outline:#CBD5E1; --outline-variant:#E2E8F0;
      --focus-ring: color-mix(in srgb, var(--primary) 40%, transparent);
      --surface-0:var(--surface);
    }
    :is(a,button,input,textarea,select):focus-visible {
      outline:none; box-shadow:0 0 0 2px var(--focus-ring), 0 0 0 4px white;
      border-radius:.5rem;
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-[var(--background)] text-[var(--on-background)]">
  <main class="min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
      <!-- Header -->
      <div class="mb-8">
        <div class="flex items-center justify-between mb-4">
          <div>
            <h1 class="text-3xl font-bold text-[var(--on-surface)]">{{ page_title }}</h1>
            <p class="text-[var(--on-surface-variant)] mt-2">{{ page_subtitle }}</p>
          </div>
          <a href="{{ function('home_url','/account/sites') }}" 
             class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--surface-1)] text-[var(--on-surface)] ring-1 ring-[var(--outline-variant)] hover:bg-[var(--surface)]">
            <i class="fa-solid fa-arrow-left"></i> Back to Sites
          </a>
        </div>
      </div>

      <!-- Error Message -->
      {% if error_msg %}
        <div class="mb-6 p-4 rounded-lg bg-red-50 border border-red-200 text-red-800">
          <i class="fa-solid fa-exclamation-triangle mr-2"></i>
          {{ error_msg }}
        </div>
      {% endif %}

      <!-- Success Message -->
      {% if success_msg %}
        <div class="mb-6 p-4 rounded-lg bg-green-50 border border-green-200 text-green-800">
          <i class="fa-solid fa-check-circle mr-2"></i>
          {{ success_msg }}
        </div>
      {% endif %}

      <!-- Create Draft Section -->
      <div class="bg-[var(--surface)] rounded-2xl ring-1 ring-[var(--outline-variant)] p-8">
        <div class="text-center">
          <div class="mb-6">
            <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-[var(--primary)] flex items-center justify-center">
              <i class="fa-solid fa-plus text-2xl text-[var(--on-primary)]"></i>
            </div>
            <h2 class="text-2xl font-semibold text-[var(--on-surface)] mb-2">Create Your Minisite</h2>
            <p class="text-[var(--on-surface-variant)] max-w-md mx-auto">
              Start with a free draft to explore and customize your minisite. 
              You can publish it anytime when you're ready.
            </p>
          </div>

          <!-- Create Draft Form -->
          <form id="create-draft-form" method="post" class="space-y-6">
            {{ function('wp_nonce_field', 'minisite_create', 'minisite_nonce') }}
            
            <!-- Form Actions -->
            <div class="flex items-center justify-center gap-4">
              <button 
                type="submit" 
                id="create-draft-button"
                class="inline-flex items-center gap-3 px-8 py-4 rounded-lg bg-[var(--primary)] text-[var(--on-primary)] shadow hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-lg"
              >
                <i class="fa-solid fa-rocket" id="create-draft-icon"></i>
                <span id="create-draft-text">Create Free Draft</span>
                <div id="create-draft-loading" class="hidden">
                  <i class="fa-solid fa-spinner fa-spin"></i>
                </div>
              </button>
              <a href="{{ function('home_url','/account/sites') }}" 
                 class="inline-flex items-center gap-2 px-6 py-3 rounded-lg bg-[var(--surface-1)] text-[var(--on-surface)] ring-1 ring-[var(--outline-variant)] hover:bg-[var(--surface)] font-medium">
                Cancel
              </a>
            </div>
          </form>
        </div>
      </div>

      <!-- How It Works Section -->
      <div class="mt-8 bg-[var(--surface-1)] rounded-2xl ring-1 ring-[var(--outline-variant)] p-6">
        <h3 class="text-lg font-semibold text-[var(--on-surface)] mb-6 text-center">
          <i class="fa-solid fa-lightbulb mr-2"></i>
          How it works
        </h3>
        <div class="grid md:grid-cols-2 gap-6">
          <!-- Phase 1: Draft Creation -->
          <div class="space-y-4">
            <h4 class="font-semibold text-[var(--on-surface)] flex items-center gap-2">
              <span class="w-6 h-6 rounded-full bg-[var(--primary)] text-[var(--on-primary)] text-xs flex items-center justify-center font-medium">1</span>
              Free Draft Creation
            </h4>
            <div class="space-y-3 text-sm text-[var(--on-surface-variant)] ml-8">
              <div class="flex items-start gap-3">
                <i class="fa-solid fa-check text-green-500 mt-0.5"></i>
                <p>Create a draft with a temporary URL (e.g., draft-abc123)</p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fa-solid fa-check text-green-500 mt-0.5"></i>
                <p>Edit and customize your minisite for free</p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fa-solid fa-check text-green-500 mt-0.5"></i>
                <p>No time limits - explore as long as you want</p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fa-solid fa-check text-green-500 mt-0.5"></i>
                <p>All features available in draft mode</p>
              </div>
            </div>
          </div>

          <!-- Phase 2: Publishing -->
          <div class="space-y-4">
            <h4 class="font-semibold text-[var(--on-surface)] flex items-center gap-2">
              <span class="w-6 h-6 rounded-full bg-[var(--primary)] text-[var(--on-primary)] text-xs flex items-center justify-center font-medium">2</span>
              Publish When Ready
            </h4>
            <div class="space-y-3 text-sm text-[var(--on-surface-variant)] ml-8">
              <div class="flex items-start gap-3">
                <i class="fa-solid fa-globe text-blue-500 mt-0.5"></i>
                <p>Choose your permanent URL (e.g., acme-dental/dallas)</p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fa-solid fa-clock text-orange-500 mt-0.5"></i>
                <p>5-minute reservation window to complete payment</p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fa-solid fa-credit-card text-green-500 mt-0.5"></i>
                <p>Single payment for slug ownership + 1 year public access</p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fa-solid fa-calendar text-purple-500 mt-0.5"></i>
                <p>1-month grace period after expiration before slug becomes available</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Benefits Section -->
      <div class="mt-8 bg-gradient-to-r from-[var(--primary)] to-[var(--secondary)] rounded-2xl p-6 text-white">
        <h3 class="text-lg font-semibold mb-4 text-center">
          <i class="fa-solid fa-star mr-2"></i>
          Why Choose Our Platform?
        </h3>
        <div class="grid md:grid-cols-3 gap-4 text-sm">
          <div class="text-center">
            <i class="fa-solid fa-shield-alt text-2xl mb-2"></i>
            <p class="font-medium">No Risk</p>
            <p class="opacity-90">Try before you buy - no commitment required</p>
          </div>
          <div class="text-center">
            <i class="fa-solid fa-bolt text-2xl mb-2"></i>
            <p class="font-medium">Fast Setup</p>
            <p class="opacity-90">Get started in seconds with our intuitive editor</p>
          </div>
          <div class="text-center">
            <i class="fa-solid fa-heart text-2xl mb-2"></i>
            <p class="font-medium">Fair Competition</p>
            <p class="opacity-90">First to pay wins - no slug squatting allowed</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Form submission handling
    document.getElementById('create-draft-form').addEventListener('submit', function(e) {
      const button = document.getElementById('create-draft-button');
      const icon = document.getElementById('create-draft-icon');
      const text = document.getElementById('create-draft-text');
      const loading = document.getElementById('create-draft-loading');
      
      // Show loading state
      button.disabled = true;
      icon.classList.add('hidden');
      text.classList.add('hidden');
      loading.classList.remove('hidden');
    });
  </script>
</body>
</html>
