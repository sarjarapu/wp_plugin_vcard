<!DOCTYPE html>
<html lang="en" class="scroll-smooth" data-theme="{{ minisite.palette|default('blue') }}" data-industry="{{ minisite.industry|default('services') }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  {# Open Graph + Twitter Cards #}
  {% set sj = minisite.siteJson|default({}) %}
  {% set ogTitle  = sj.seo.title|default(minisite.title) %}
  {# Build a robust description fallback #}
  {% set ogDesc   = sj.seo.description|default('')|striptags|trim %}
  {% if ogDesc is empty %}
    {% set aboutPlain = sj.about.html|default('')|striptags|trim %}
    {% set ogDesc = sj.hero.subheading|default(aboutPlain)|default(minisite.title)|trim %}
  {% endif %}
  {% set ogDesc = ogDesc|slice(0, 200) %}
  {% set ogImage  = sj.seo.ogImage|default(sj.hero.image|default(sj.brand.logo|default(''))) %}
  {% set homeBase = function('home_url') %}
  {# Ensure absolute image URL for scrapers #}
  {% if ogImage and not (ogImage starts with 'http') and not (ogImage starts with '//') %}
    {% set ogImageAbs = homeBase ~ ogImage %}
  {% else %}
    {% set ogImageAbs = ogImage %}
  {% endif %}
  <title>{{ ogTitle }}</title>
  <meta name="description" content="{{ ogDesc }}" />
  <meta property="og:title" content="{{ ogTitle }}" />
  <meta property="og:description" content="{{ ogDesc }}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="{{ function('home_url', '/b/' ~ minisite.slugs.business ~ '/' ~ minisite.slugs.location) }}" />
  {% if ogImageAbs %}
    <meta property="og:image" content="{{ ogImageAbs }}" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="{{ ogImageAbs }}" />
  {% else %}
    <meta name="twitter:card" content="summary" />
  {% endif %}
  <meta name="twitter:title" content="{{ ogTitle }}" />
  <meta name="twitter:description" content="{{ ogDesc }}" />
  {# Favicon #}
  <link rel="icon" type="image/x-icon" href="{{ homeBase }}/wp-content/plugins/minisite-manager/assets/favicon.ico" />
  {# Fonts #}
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  {# Tailwind CSS #}
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
          },
          colors: {
            primary: {
              50: '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd', 400: '#60a5fa',
              500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 800: '#1e40af', 900: '#1e3a8a'
            },
            secondary: {
              50: '#f0f9ff', 100: '#e0f2fe', 200: '#bae6fd', 300: '#7dd3fc', 400: '#38bdf8',
              500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1', 800: '#075985', 900: '#0c4a6e'
            }
          }
        }
      }
    }
  </script>
  {# Custom CSS Variables #}
  <style>
    :root {
      --primary: #2563EB; --on-primary: #fff;
      --secondary: #0EA5E9; --on-secondary: #03283A;
      --background: #F8FAFC; --on-background: #0F172A;
      --surface: #FFFFFF; --on-surface: #0F172A;
      --surface-1: #F1F5F9; --on-surface-variant: #475569;
      --outline: #CBD5E1; --outline-variant: #E2E8F0;
      --surface-0: var(--surface);
    }
    [data-theme="blue"] { --primary: #2563EB; --secondary: #0EA5E9; }
    [data-theme="green"] { --primary: #059669; --secondary: #10B981; }
    [data-theme="purple"] { --primary: #7C3AED; --secondary: #8B5CF6; }
    [data-theme="red"] { --primary: #DC2626; --secondary: #EF4444; }
    [data-theme="orange"] { --primary: #EA580C; --secondary: #F97316; }
    [data-theme="pink"] { --primary: #DB2777; --secondary: #EC4899; }
  </style>
</head>
<body class="antialiased bg-[var(--background)] text-[var(--on-background)] font-sans">
  {# Header #}
  <header class="bg-[var(--surface)] border-b border-[var(--outline)]">
    <div class="max-w-6xl mx-auto px-6 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          {% if sj.brand.logo %}
            <img src="{{ sj.brand.logo }}" alt="{{ minisite.name }}" class="h-8 w-auto" />
          {% endif %}
          <h1 class="text-xl font-semibold text-[var(--on-surface)]">{{ minisite.name }}</h1>
        </div>
        <nav class="hidden md:flex items-center space-x-6">
          <a href="#about" class="text-[var(--on-surface-variant)] hover:text-[var(--primary)] transition">About</a>
          <a href="#services" class="text-[var(--on-surface-variant)] hover:text-[var(--primary)] transition">Services</a>
          <a href="#contact" class="text-[var(--on-surface-variant)] hover:text-[var(--primary)] transition">Contact</a>
        </nav>
      </div>
    </div>
  </header>

  {# Hero Section #}
  <section class="bg-gradient-to-br from-[var(--primary)] to-[var(--secondary)] text-white py-16">
    <div class="max-w-6xl mx-auto px-6 text-center">
      {% if sj.hero.image %}
        <img src="{{ sj.hero.image }}" alt="{{ minisite.name }}" class="mx-auto mb-8 rounded-lg shadow-2xl max-w-md w-full" />
      {% endif %}
      <h1 class="text-4xl md:text-6xl font-bold mb-4">{{ sj.hero.heading|default(minisite.name) }}</h1>
      {% if sj.hero.subheading %}
        <p class="text-xl md:text-2xl opacity-90 mb-8">{{ sj.hero.subheading }}</p>
      {% endif %}
      {% if sj.hero.cta %}
        <a href="#contact" class="inline-block bg-white text-[var(--primary)] px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">
          {{ sj.hero.cta }}
        </a>
      {% endif %}
    </div>
  </section>

  {# About Section #}
  <section id="about" class="py-16 bg-[var(--surface)]">
    <div class="max-w-6xl mx-auto px-6">
      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div>
          <h2 class="text-3xl font-bold mb-6 text-[var(--on-surface)]">About {{ minisite.name }}</h2>
          {% if sj.about.html %}
            <div class="prose prose-lg text-[var(--on-surface-variant)]">
              {{ sj.about.html|raw }}
            </div>
          {% else %}
            <p class="text-lg text-[var(--on-surface-variant)]">
              We are a {{ minisite.industry }} business located in {{ minisite.city }}{% if minisite.region %}, {{ minisite.region }}{% endif %}. 
              Our team is dedicated to providing exceptional service to our community.
            </p>
          {% endif %}
        </div>
        {% if sj.about.image %}
          <div>
            <img src="{{ sj.about.image }}" alt="About {{ minisite.name }}" class="rounded-lg shadow-lg w-full" />
          </div>
        {% endif %}
      </div>
    </div>
  </section>

  {# Services Section #}
  {% if sj.services %}
    <section id="services" class="py-16 bg-[var(--background)]">
      <div class="max-w-6xl mx-auto px-6">
        <h2 class="text-3xl font-bold text-center mb-12 text-[var(--on-surface)]">Our Services</h2>
        <div class="grid md:grid-cols-3 gap-8">
          {% for service in sj.services %}
            <div class="bg-[var(--surface)] p-6 rounded-lg shadow-md">
              {% if service.icon %}
                <div class="text-[var(--primary)] text-3xl mb-4">{{ service.icon }}</div>
              {% endif %}
              <h3 class="text-xl font-semibold mb-3 text-[var(--on-surface)]">{{ service.title }}</h3>
              <p class="text-[var(--on-surface-variant)]">{{ service.description }}</p>
            </div>
          {% endfor %}
        </div>
      </div>
    </section>
  {% endif %}

  {# Contact Section #}
  <section id="contact" class="py-16 bg-[var(--surface)]">
    <div class="max-w-6xl mx-auto px-6">
      <h2 class="text-3xl font-bold text-center mb-12 text-[var(--on-surface)]">Get In Touch</h2>
      <div class="grid md:grid-cols-2 gap-12">
        <div>
          <h3 class="text-xl font-semibold mb-4 text-[var(--on-surface)]">Contact Information</h3>
          <div class="space-y-3 text-[var(--on-surface-variant)]">
            <p><strong>Location:</strong> {{ minisite.city }}{% if minisite.region %}, {{ minisite.region }}{% endif %}</p>
            <p><strong>Country:</strong> {{ minisite.countryCode }}</p>
            {% if minisite.postalCode %}
              <p><strong>Postal Code:</strong> {{ minisite.postalCode }}</p>
            {% endif %}
            {% if sj.contact.phone %}
              <p><strong>Phone:</strong> <a href="tel:{{ sj.contact.phone }}" class="text-[var(--primary)] hover:underline">{{ sj.contact.phone }}</a></p>
            {% endif %}
            {% if sj.contact.email %}
              <p><strong>Email:</strong> <a href="mailto:{{ sj.contact.email }}" class="text-[var(--primary)] hover:underline">{{ sj.contact.email }}</a></p>
            {% endif %}
          </div>
        </div>
        <div>
          {% if sj.contact.form %}
            <form class="space-y-4">
              <div>
                <label for="name" class="block text-sm font-medium text-[var(--on-surface)] mb-1">Name</label>
                <input type="text" id="name" name="name" class="w-full px-3 py-2 border border-[var(--outline)] rounded-lg focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent" required />
              </div>
              <div>
                <label for="email" class="block text-sm font-medium text-[var(--on-surface)] mb-1">Email</label>
                <input type="email" id="email" name="email" class="w-full px-3 py-2 border border-[var(--outline)] rounded-lg focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent" required />
              </div>
              <div>
                <label for="message" class="block text-sm font-medium text-[var(--on-surface)] mb-1">Message</label>
                <textarea id="message" name="message" rows="4" class="w-full px-3 py-2 border border-[var(--outline)] rounded-lg focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent" required></textarea>
              </div>
              <button type="submit" class="w-full bg-[var(--primary)] text-white py-2 px-4 rounded-lg hover:bg-[var(--secondary)] transition">
                Send Message
              </button>
            </form>
          {% endif %}
        </div>
      </div>
    </div>
  </section>

  {# Footer #}
  <footer class="bg-[var(--on-surface)] text-white py-8">
    <div class="max-w-6xl mx-auto px-6 text-center">
      <p>&copy; {{ "now"|date("Y") }} {{ minisite.name }}. All rights reserved.</p>
      <p class="text-sm opacity-75 mt-2">Powered by Minisite Manager</p>
    </div>
  </footer>

  {# JavaScript for interactivity #}
  <script>
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Form submission handling
    const contactForm = document.querySelector('form');
    if (contactForm) {
      contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        // Add your form submission logic here
        alert('Thank you for your message! We will get back to you soon.');
      });
    }
  </script>
</body>
</html>
